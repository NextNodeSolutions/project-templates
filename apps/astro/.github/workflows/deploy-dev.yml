name: Deploy to Development

on:
  push:
    branches: [develop]
  workflow_dispatch:
    inputs:
      branch:
        description: 'Branch to deploy from'
        required: false
        default: 'develop'
        type: choice
        options:
          - develop
          - main

jobs:
  deploy:
    name: Deploy
    # Skip first commit to avoid deployment during initial setup
    if: github.run_number > 1
    uses: NextNodeSolutions/github-actions/.github/workflows/deploy.yml@main
    with:
      service-name: 'dev-{{project_name}}'
      domain: '{{dev_domain}}'
      environment: 'development'
      pnpm-version: '10.12.4'
      checkout-ref: ${{ github.event.inputs.branch || 'develop' }}
    secrets: inherit