name: Deploy to Development

on:
  push:
    branches: [develop]
  workflow_dispatch:
    inputs:
      branch:
        description: 'Branch to deploy from'
        required: false
        default: 'develop'
        type: choice
        options:
          - develop
          - main

jobs:
  deploy:
    name: Deploy to Development
    # Skip first commit to avoid deployment during initial setup
    if: github.run_number > 1
    uses: NextNodeSolutions/github-actions/workflows/packs/deploy-dev.yml@main
    with:
      app-name: 'dev-{{project_name}}'
      fly-org: '{{fly_org}}'
      domain: '{{website_url}}'
      checkout-ref: ${{ github.event.inputs.branch || 'develop' }}
    secrets: inherit

